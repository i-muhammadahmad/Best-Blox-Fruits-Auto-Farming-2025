import React, { useEffect } from 'react';
import useRouter from 'utils/useRouter';
import {
  Paper,
  makeStyles,
  Table,
  TableBody,
  TableCell,
  TableContainer,
  TableRow,
  Card,
  CardHeader,
  CardContent
} from '@material-ui/core';
import { useSelector, useDispatch } from 'react-redux';
import { isEmpty, join } from 'lodash';

const useStyles = makeStyles(theme => ({
  root: {
    width: theme.breakpoints.values.lg,
    maxWidth: '100%',
    margin: '0 auto',
    padding: theme.spacing(3, 3, 6, 3)
  },
  projectDetails: {
    marginTop: theme.spacing(3)
  },
  formGroup: {
    marginBottom: theme.spacing(3)
  }
}));

const AssetTypeDisplay = () => {
  const classes = useStyles();
  const router = useRouter();
  const assetTypesState = useSelector(state => state.assetTypesState);
  const dispatch = useDispatch();

  const getBinderWithHTML = (value) => {
    let binder_with_arr = [];
    if(value.is_binded_with_employee == 1){
      binder_with_arr.push('Employee');
    }
    if(value.is_binded_with_office == 1){
      binder_with_arr.push('Office');
    }
    if(value.is_binded_with_workstation == 1){
      binder_with_arr.push('Workstation');
    }
    return(
      <div> 
        { join(binder_with_arr, [', ']) }
      </div>
    );
  }

  return (
    <>
      <Card
        className={classes.projectDetails}
      >
        <CardHeader title="Quiz Setup View" />
        <CardContent>
          <TableContainer component={Paper}>
            <Table className={classes.table} aria-label="simple table">
              <TableBody>
                <TableRow>
                  <TableCell variant="head" > Asset Type Name </TableCell>
                  <TableCell>{assetTypesState.assetTypesRecord.name}</TableCell>
                </TableRow>
                <TableRow>
                  <TableCell variant="head" > Binder With </TableCell>
                  <TableCell>{
                    getBinderWithHTML(assetTypesState.assetTypesRecord)
                  }</TableCell>
                </TableRow>
                <TableRow>
                  <TableCell variant="head" > Created By </TableCell>
                  <TableCell>{
                    !isEmpty(assetTypesState.assetTypesRecord.created_by_user) ?
                      assetTypesState.assetTypesRecord.created_by_user.email : ''
                  }</TableCell>
                </TableRow>
                <TableRow>
                  <TableCell variant="head" > Created At </TableCell>
                  <TableCell>{assetTypesState.assetTypesRecord.date_created}</TableCell>
                </TableRow>
                <TableRow>
                  <TableCell variant="head" > Last Updated By </TableCell>
                  <TableCell>{
                    !isEmpty(assetTypesState.assetTypesRecord.updated_by_user) ?
                      assetTypesState.assetTypesRecord.updated_by_user.email : ''
                  }</TableCell>
                </TableRow>
                <TableRow>
                  <TableCell variant="head" > Last Updated At </TableCell>
                  <TableCell>{assetTypesState.assetTypesRecord.date_last_modified}</TableCell>
                </TableRow>
              </TableBody>
            </Table>
          </TableContainer>
        </CardContent>
      </Card>
      <Card
        className={classes.projectDetails}
      >
        <CardHeader title="Asset Type Description" />
        <CardContent>
          <div
            className="ck-content" dangerouslySetInnerHTML={{ __html: assetTypesState.assetTypesRecord.description }}
          />
        </CardContent>
      </Card>
    </>
  );
}

export default AssetTypeDisplay;